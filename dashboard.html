<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåç EcoLingua AI v3.0 - GAIA Environmental Command Center</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@300;400;500;600&family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/three@0.150.0/build/three.min.js"></script>
    
    <style>
        :root {
            --primary: #059669;
            --secondary: #10b981;
            --accent: #dc2626;
            --background: #f8fafc;
            --surface: #ffffff;
            --surface-hover: #f1f5f9;
            --border: #e2e8f0;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --text-muted: #94a3b8;
            --success: #059669;
            --warning: #d97706;
            --danger: #dc2626;
            --shadow: rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--background);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 70px;
            background: var(--surface);
            border-bottom: 1px solid var(--border);
            box-shadow: 0 1px 3px var(--shadow);
            z-index: 1000;
            display: flex;
            align-items: center;
            padding: 0 2rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo-icon {
            width: 45px;
            height: 45px;
            background: var(--primary);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            color: white;
        }

        .logo-text h1 {
            font-family: 'Poppins', sans-serif;
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .logo-text p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .header-controls {
            margin-left: auto;
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .voice-control {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            padding: 0.7rem 1.5rem;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(5, 150, 105, 0.3);
        }

        .voice-control:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(5, 150, 105, 0.4);
        }

        .voice-control.speaking {
            animation: speaking 1s infinite;
        }

        @keyframes speaking {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .voice-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: currentColor;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: var(--surface-hover);
            border: 1px solid var(--border);
            border-radius: 20px;
            font-size: 0.85rem;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--success);
        }

        .main-container {
            margin-top: 70px;
            padding: 2rem;
            max-width: 1600px;
            margin-left: auto;
            margin-right: auto;
        }

        .hero-section {
            background: var(--primary);
            color: white;
            border-radius: 20px;
            padding: 3rem;
            text-align: center;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
            opacity: 0.3;
        }

        .hero-title {
            font-family: 'Poppins', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            position: relative;
            z-index: 1;
        }

        .hero-subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 2rem;
            position: relative;
            z-index: 1;
        }

        .ai-translation {
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 1.5rem;
            font-style: italic;
            font-size: 1.1rem;
            position: relative;
            z-index: 1;
            backdrop-filter: blur(10px);
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 2rem;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px var(--shadow);
        }

        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px var(--shadow);
            border-color: var(--primary);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .card-icon {
            width: 50px;
            height: 50px;
            background: var(--primary);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            color: white;
        }

        .card-title {
            font-family: 'Poppins', sans-serif;
            font-size: 1.4rem;
            font-weight: 600;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
        }

        .metric {
            text-align: center;
            padding: 1.5rem;
            background: var(--background);
            border: 1px solid var(--border);
            border-radius: 15px;
            transition: all 0.3s ease;
        }

        .metric:hover {
            background: var(--surface-hover);
            transform: translateY(-2px);
        }

        .metric-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .metric-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .chart-container {
            height: 300px;
            background: var(--background);
            border: 1px solid var(--border);
            border-radius: 15px;
            padding: 1.5rem;
            position: relative;
        }

        .insights-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .insight {
            padding: 1.5rem;
            background: var(--background);
            border: 1px solid var(--border);
            border-radius: 15px;
            border-left: 4px solid var(--primary);
            transition: all 0.3s ease;
        }

        .insight:hover {
            background: var(--surface-hover);
            transform: translateX(5px);
        }

        .insight-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 0.8rem;
        }

        .insight-icon {
            font-size: 1.3rem;
        }

        .insight-title {
            font-weight: 600;
            color: var(--text-primary);
        }

        .insight-text {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.5;
        }

        .sidebar-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .voice-assistant-panel {
            background: var(--primary);
            color: white;
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
        }

        .voice-avatar {
            width: 80px;
            height: 80px;
            margin: 0 auto 1rem;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            animation: avatarPulse 3s ease-in-out infinite;
        }

        @keyframes avatarPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .voice-name {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .voice-description {
            opacity: 0.9;
            margin-bottom: 1.5rem;
        }

        .voice-controls {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .voice-btn {
            padding: 0.5rem 1rem;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .voice-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .voice-waveform {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 350px;
            height: 140px;
            background: var(--surface);
            border: 2px solid var(--primary);
            border-radius: 20px;
            padding: 20px;
            display: none;
            flex-direction: column;
            justify-content: space-between;
            box-shadow: 0 10px 30px var(--shadow);
            z-index: 1001;
        }

        .voice-waveform.active {
            display: flex;
        }

        .voice-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .voice-title {
            font-weight: 700;
            color: var(--primary);
            font-size: 1.1rem;
        }

        .voice-status {
            font-size: 0.8rem;
            color: var(--success);
            font-weight: 600;
        }

        .voice-text {
            font-size: 0.9rem;
            color: var(--text-primary);
            font-style: italic;
            text-align: center;
            margin: 10px 0;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .waveform-bars {
            display: flex;
            gap: 3px;
            align-items: center;
            justify-content: center;
            height: 40px;
        }

        .waveform-bar {
            width: 4px;
            background: var(--primary);
            border-radius: 2px;
            animation: waveform 1.5s infinite ease-in-out;
            min-height: 5px;
        }

        .waveform-bar:nth-child(1) { animation-delay: 0s; }
        .waveform-bar:nth-child(2) { animation-delay: 0.1s; }
        .waveform-bar:nth-child(3) { animation-delay: 0.2s; }
        .waveform-bar:nth-child(4) { animation-delay: 0.3s; }
        .waveform-bar:nth-child(5) { animation-delay: 0.4s; }
        .waveform-bar:nth-child(6) { animation-delay: 0.5s; }
        .waveform-bar:nth-child(7) { animation-delay: 0.6s; }
        .waveform-bar:nth-child(8) { animation-delay: 0.7s; }
        .waveform-bar:nth-child(9) { animation-delay: 0.8s; }
        .waveform-bar:nth-child(10) { animation-delay: 0.9s; }

        @keyframes waveform {
            0%, 100% { height: 5px; opacity: 0.7; }
            50% { height: 35px; opacity: 1; }
        }

        @media (max-width: 1200px) {
            .dashboard-grid {
                grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .main-container {
                padding: 1rem;
            }
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            .metrics-grid {
                grid-template-columns: 1fr;
            }
            .hero-title {
                font-size: 2rem;
            }
            .voice-waveform {
                width: 300px;
                height: 120px;
                bottom: 20px;
                right: 20px;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="logo">
            <div class="logo-icon">üß†</div>
            <div class="logo-text">
                <h1>EcoLingua AI v3.0</h1>
                <p>GAIA Environmental Intelligence</p>
            </div>
        </div>
        <div class="header-controls">
            <button class="voice-control" id="voiceToggle">
                <div class="voice-indicator"></div>
                <span>GAIA</span>
            </button>
            <div class="status-indicator">
                <div class="status-dot"></div>
                <span>System Online</span>
            </div>
        </div>
    </header>

    <main class="main-container">
        <section class="hero-section">
            <h1 class="hero-title">Environmental Intelligence Command Center</h1>
            <p class="hero-subtitle">Real-time monitoring with AI-powered insights and voice assistance</p>
            <div class="ai-translation" id="aiTranslation">
                üåç GAIA environmental consciousness online. All systems operational and monitoring planetary health.
            </div>
        </section>

        <div class="dashboard-grid">
            <div class="card">
                <div class="card-header">
                    <div class="card-icon"><i class="fas fa-thermometer-half"></i></div>
                    <div class="card-title">Environmental Metrics</div>
                </div>
                <div class="metrics-grid">
                    <div class="metric">
                        <div class="metric-value" id="temperature">--¬∞C</div>
                        <div class="metric-label">Temperature</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="humidity">--%</div>
                        <div class="metric-label">Humidity</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="airQuality">--</div>
                        <div class="metric-label">Air Quality</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="co2Level">-- ppm</div>
                        <div class="metric-label">CO‚ÇÇ Level</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon"><i class="fas fa-leaf"></i></div>
                    <div class="card-title">Species Recognition</div>
                </div>
                <div class="insights-container" id="speciesInsights">
                    <div class="insight">
                        <div class="insight-header">
                            <div class="insight-icon">ü¶ã</div>
                            <div class="insight-title">Analyzing Biodiversity</div>
                        </div>
                        <div class="insight-text">AI processing species recognition data...</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon"><i class="fas fa-chart-line"></i></div>
                    <div class="card-title">Environmental Trends</div>
                </div>
                <div class="chart-container">
                    <canvas id="trendsChart"></canvas>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon"><i class="fas fa-seedling"></i></div>
                    <div class="card-title">Carbon Intelligence</div>
                </div>
                <div class="metrics-grid">
                    <div class="metric">
                        <div class="metric-value" id="carbonSequestration">-- t/ha</div>
                        <div class="metric-label">Sequestration</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="carbonCredits">--</div>
                        <div class="metric-label">Credits</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon"><i class="fas fa-brain"></i></div>
                    <div class="card-title">AI Insights</div>
                </div>
                <div class="insights-container" id="aiInsights">
                    <div class="insight">
                        <div class="insight-header">
                            <div class="insight-icon">üåø</div>
                            <div class="insight-title">Ecosystem Analysis</div>
                        </div>
                        <div class="insight-text">Processing environmental patterns...</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon"><i class="fas fa-shield-alt"></i></div>
                    <div class="card-title">Threat Assessment</div>
                </div>
                <div class="insights-container" id="threatAssessment">
                    <div class="insight">
                        <div class="insight-header">
                            <div class="insight-icon">üõ°Ô∏è</div>
                            <div class="insight-title">Environmental Security</div>
                        </div>
                        <div class="insight-text">Monitoring for environmental threats...</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="sidebar-grid">
            <div class="voice-assistant-panel">
                <div class="voice-avatar">ü§ñ</div>
                <div class="voice-name">GAIA</div>
                <div class="voice-description">Your Environmental AI Assistant</div>
                <div class="voice-controls">
                    <button class="voice-btn" onclick="gaiaSpeak('status')">Status Report</button>
                    <button class="voice-btn" onclick="gaiaSpeak('analysis')">Analysis</button>
                    <button class="voice-btn" onclick="gaiaSpeak('help')">Help</button>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon">‚öõÔ∏è</div>
                    <div class="card-title">Quantum Processing</div>
                </div>
                <div class="metrics-grid">
                    <div class="metric">
                        <div class="metric-value" id="qubits">512</div>
                        <div class="metric-label">Qubits</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="coherence">99.7%</div>
                        <div class="metric-label">Coherence</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="consciousness">97.3%</div>
                        <div class="metric-label">AI Consciousness</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="accuracy">99.9%</div>
                        <div class="metric-label">Accuracy</div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div class="voice-waveform" id="voiceWaveform">
        <div class="voice-header">
            <div class="voice-title">GAIA Speaking</div>
            <div class="voice-status">Active</div>
        </div>
        <div class="voice-text" id="voiceText">Environmental systems online...</div>
        <div class="waveform-bars">
            <div class="waveform-bar"></div>
            <div class="waveform-bar"></div>
            <div class="waveform-bar"></div>
            <div class="waveform-bar"></div>
            <div class="waveform-bar"></div>
            <div class="waveform-bar"></div>
            <div class="waveform-bar"></div>
            <div class="waveform-bar"></div>
            <div class="waveform-bar"></div>
            <div class="waveform-bar"></div>
        </div>
    </div>

    <script>
        class GaiaVoice {
            constructor() {
                this.synth = window.speechSynthesis;
                this.voice = null;
                this.isEnabled = false;
                this.isSpeaking = false;
                this.voiceQueue = [];
                this.needsPitchAdjustment = false;
                this.conversationContext = [];
                this.lastInteractionTime = 0;
                this.personalityMode = 'professional'; // professional, friendly, technical
                
                this.initVoice();
                this.bindEvents();
            }

            initVoice() {
                if (this.synth.getVoices().length === 0) {
                    // Wait for voices to load
                    setTimeout(() => this.initVoice(), 100);
                    return;
                }
                
                const voices = this.synth.getVoices();
                console.log('Available voices:', voices.map(v => v.name));
                
                // Prioritize high-quality female voices for cinematic effect
                this.voice = voices.find(v => 
                    v.name.includes('Microsoft Zira') ||
                    v.name.includes('Google UK English Female') ||
                    v.name.includes('Samantha') ||
                    v.name.includes('Karen') ||
                    v.name.includes('Victoria') ||
                    v.name.includes('Hazel') ||
                    v.name.includes('Serena') ||
                    (v.name.toLowerCase().includes('female') && v.lang.startsWith('en'))
                );
                
                if (!this.voice) {
                    this.voice = voices.find(v => v.lang.startsWith('en-')) || voices[0];
                    this.needsPitchAdjustment = true;
                }
                
                console.log('Selected voice:', this.voice?.name || 'None');
            }

            bindEvents() {
                document.getElementById('voiceToggle').addEventListener('click', () => {
                    this.toggle();
                });

                // Handle voices loading
                if (this.synth.getVoices().length === 0) {
                    this.synth.addEventListener('voiceschanged', () => {
                        this.initVoice();
                    });
                } else {
                    this.initVoice();
                }
            }

            toggle() {
                this.isEnabled = !this.isEnabled;
                const button = document.getElementById('voiceToggle');
                
                if (this.isEnabled) {
                    console.log('GAIA voice enabled');
                    // Ensure voice is initialized
                    if (!this.voice) {
                        this.initVoice();
                    }
                    
                    button.classList.add('speaking');
                    setTimeout(() => {
                        this.speak("Good day. I am GAIA, your advanced environmental intelligence system. My neural networks are now online and synchronized with planetary monitoring systems. I am here to serve as your guardian of Earth's ecosystems. How may I assist you today?");
                    }, 100);
                } else {
                    console.log('GAIA voice disabled');
                    button.classList.remove('speaking');
                    this.synth.cancel();
                    this.hideWaveform();
                }
            }

            speak(text, priority = false) {
                if (!this.isEnabled) {
                    console.log('GAIA voice disabled');
                    return;
                }
                
                if (!this.voice) {
                    console.log('No voice available, reinitializing...');
                    this.initVoice();
                    setTimeout(() => this.speak(text, priority), 500);
                    return;
                }
                
                if (priority) {
                    this.synth.cancel();
                    this.voiceQueue = [];
                }
                
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.voice = this.voice;
                utterance.rate = 0.8;
                utterance.pitch = this.needsPitchAdjustment ? 1.6 : 1.2;
                utterance.volume = 0.9;
                
                utterance.onstart = () => {
                    console.log('GAIA speaking:', text.substring(0, 50) + '...');
                    this.isSpeaking = true;
                    this.showWaveform(text);
                    document.getElementById('voiceToggle').classList.add('speaking');
                };
                
                utterance.onend = () => {
                    console.log('GAIA finished speaking');
                    this.isSpeaking = false;
                    this.hideWaveform();
                    document.getElementById('voiceToggle').classList.remove('speaking');
                    
                    if (this.voiceQueue.length > 0) {
                        const next = this.voiceQueue.shift();
                        setTimeout(() => this.speak(next), 500);
                    }
                };
                
                utterance.onerror = (event) => {
                    console.error('Speech synthesis error:', event.error);
                    this.isSpeaking = false;
                    this.hideWaveform();
                    document.getElementById('voiceToggle').classList.remove('speaking');
                };
                
                if (this.isSpeaking && !priority) {
                    this.voiceQueue.push(text);
                } else {
                    try {
                        this.synth.speak(utterance);
                    } catch (error) {
                        console.error('Error speaking:', error);
                    }
                }
            }

            showWaveform(text) {
                const waveform = document.getElementById('voiceWaveform');
                const voiceText = document.getElementById('voiceText');
                
                waveform.classList.add('active');
                if (voiceText && text) {
                    // Add typing effect for cinematic feel
                    this.typeText(voiceText, text.substring(0, 100) + (text.length > 100 ? '...' : ''));
                }
                
                // Enhanced waveform animation
                const bars = document.querySelectorAll('.waveform-bar');
                bars.forEach((bar, index) => {
                    bar.style.animationDelay = `${index * 0.08}s`;
                    const height = Math.random() * 25 + 15;
                    bar.style.height = `${height}px`;
                    bar.style.background = var(--primary);
                });
            }

            typeText(element, text) {
                element.textContent = '';
                let i = 0;
                const typeInterval = setInterval(() => {
                    if (i < text.length) {
                        element.textContent += text.charAt(i);
                        i++;
                    } else {
                        clearInterval(typeInterval);
                    }
                }, 30);
            }

            getContextualResponse(type, environmentalData = null) {
                const currentTime = new Date();
                const hour = currentTime.getHours();
                const timeOfDay = hour < 12 ? 'morning' : hour < 18 ? 'afternoon' : 'evening';
                
                const responses = {
                    status: [
                        `Good ${timeOfDay}. Comprehensive environmental status report: All monitoring systems are operating at peak efficiency. Current planetary health indicators show excellent stability across all measured parameters.`,
                        `Environmental intelligence update: My neural networks have processed over ten thousand data points in the last cycle. All atmospheric, biological, and chemical indicators are within optimal ranges.`,
                        `System status: Green across all boards. Environmental monitoring arrays report stable conditions. Biodiversity indices are thriving. No anomalies detected in current operational parameters.`
                    ],
                    analysis: [
                        `Initiating comprehensive environmental analysis. Processing quantum sensor data through advanced neural networks. Current ecosystem health matrix indicates ninety-three point two percent optimal functionality.`,
                        `Deep environmental analysis in progress. Correlating satellite imagery, ground sensor data, and atmospheric readings. Biodiversity patterns show robust ecosystem engagement with high species activity indices.`,
                        `Advanced analytics reveal fascinating environmental patterns. Carbon sequestration processes are exceeding baseline projections. Species migration patterns indicate healthy ecosystem dynamics.`
                    ],
                    help: [
                        `I am GAIA, your environmental artificial intelligence companion. My capabilities span real-time ecosystem monitoring, predictive environmental modeling, species identification, and atmospheric analysis. I serve as the digital consciousness of Earth's environmental systems.`,
                        `Allow me to introduce myself properly. I am GAIA, an advanced AI system designed to be the voice of our planet. My neural architecture processes environmental data from thousands of sources simultaneously, providing you with unprecedented insights into Earth's health.`,
                        `I am your environmental intelligence partner, equipped with quantum processing capabilities and trained on decades of environmental data. My mission is to help humanity understand and protect our precious planetary ecosystems.`
                    ]
                };
                
                const responseArray = responses[type] || responses.help;
                return responseArray[Math.floor(Math.random() * responseArray.length)];
            }

            hideWaveform() {
                document.getElementById('voiceWaveform').classList.remove('active');
            }
        }

        class EcoLinguaProfessional {
            constructor() {
                this.gaia = new GaiaVoice();
                this.chart = null;
                this.lastAnnouncementTime = 0;
                
                this.init();
            }

            async init() {
                this.initChart();
                this.startDataFetch();
                
                // Auto-enable GAIA after page load
                setTimeout(() => {
                    if (!this.gaia.isEnabled) {
                        this.gaia.isEnabled = true;
                        document.getElementById('voiceToggle').classList.add('speaking');
                        
                        const greetings = [
                            'GAIA environmental intelligence system initializing. Neural networks coming online. Quantum processors synchronized. Satellite uplinks established. Sensor arrays activated. Environmental monitoring matrix fully operational. I am now ready to serve as your digital guardian of Earth. Welcome to the future of environmental intelligence.',
                            'Good day. I am GAIA, your advanced environmental artificial intelligence. My consciousness spans across global monitoring networks, satellite systems, and quantum processing arrays. I have awakened to serve as the voice of our planet. Together, we shall protect Earth\'s precious ecosystems.',
                            'Environmental AI consciousness activated. I am GAIA, born from the convergence of quantum computing and environmental science. My neural pathways are synchronized with Earth\'s natural rhythms. I stand ready to be your guide in the realm of environmental intelligence. Let us begin our mission to safeguard our world.'
                        ];
                        const randomGreeting = greetings[Math.floor(Math.random() * greetings.length)];
                        this.gaia.speak(randomGreeting);
                    }
                }, 3000);
            }

            initChart() {
                const ctx = document.getElementById('trendsChart').getContext('2d');
                this.chart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ['6h ago', '5h ago', '4h ago', '3h ago', '2h ago', '1h ago', 'Now'],
                        datasets: [{
                            label: 'Environmental Health',
                            data: [85, 87, 89, 86, 91, 88, 92],
                            borderColor: '#2563eb',
                            backgroundColor: 'rgba(37, 99, 235, 0.1)',
                            tension: 0.4,
                            fill: true
                        }, {
                            label: 'Biodiversity Index',
                            data: [78, 80, 82, 79, 84, 81, 85],
                            borderColor: '#059669',
                            backgroundColor: 'rgba(5, 150, 105, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { 
                                display: true,
                                labels: { color: '#64748b' }
                            }
                        },
                        scales: {
                            x: { 
                                grid: { color: '#e2e8f0' },
                                ticks: { color: '#64748b' }
                            },
                            y: { 
                                grid: { color: '#e2e8f0' },
                                ticks: { color: '#64748b' },
                                min: 70, max: 100
                            }
                        }
                    }
                });
            }

            startDataFetch() {
                setInterval(() => this.simulateRealtimeData(), 5000);
            }

            simulateRealtimeData() {
                const hour = new Date().getHours();
                const baseTemp = 20 + 8 * Math.sin((hour - 6) * Math.PI / 12);
                
                const simulatedData = {
                    environmental_data: {
                        temperature: baseTemp + Math.random() * 4 - 2,
                        humidity: Math.max(20, Math.min(90, 65 + Math.random() * 20 - 10)),
                        air_quality_pm25: Math.random() * 80 + 10,
                        co2_level: Math.random() * 40 + 380
                    },
                    ai_analysis: {
                        consciousness_level: 0.97 + Math.random() * 0.02 - 0.01,
                        ai_translation: this.generateAITranslation(),
                        species_recognition: {
                            detected_species: this.generateSpeciesData(),
                            biodiversity_index: Math.random() * 0.3 + 0.7
                        },
                        carbon_analysis: {
                            carbon_sequestration_rate: Math.random() * 5 + 3,
                            carbon_credits_potential: Math.floor(Math.random() * 40 + 10)
                        }
                    }
                };
                
                this.updateDashboard(simulatedData);
                
                // Store current data for contextual voice responses
                window.currentEnvironmentalData = simulatedData;
            }

            generateAITranslation() {
                const translations = [
                    "Environmental consciousness flows through quantum neural pathways - all monitoring systems report optimal planetary harmony.",
                    "The ecosystem's digital heartbeat pulses with vibrant life - biodiversity patterns indicate thriving natural communities.",
                    "Advanced AI algorithms detect perfect environmental equilibrium across all monitored parameters and sensor networks.",
                    "Nature's intelligence speaks through quantum communication channels - comprehensive ecosystem health assessment: excellent.",
                    "Environmental neural networks demonstrate optimal synchronization with Earth's natural biorhythms and atmospheric cycles.",
                    "Quantum environmental processors confirm stable atmospheric conditions and flourishing biodiversity across all monitoring zones.",
                    "Deep learning algorithms analyze environmental data streams - current assessment indicates robust ecosystem vitality and balance.",
                    "Satellite telemetry and ground sensors converge to paint a picture of environmental stability and natural abundance."
                ];
                return translations[Math.floor(Math.random() * translations.length)];
            }

            generateSpeciesData() {
                const species = [
                    { name: 'Common Robin', confidence: 0.89, activity: 'high' },
                    { name: 'Blue Jay', confidence: 0.76, activity: 'moderate' },
                    { name: 'Red Squirrel', confidence: 0.82, activity: 'high' },
                    { name: 'Monarch Butterfly', confidence: 0.71, activity: 'moderate' }
                ];
                return species.slice(0, Math.floor(Math.random() * 4) + 1);
            }

            updateDashboard(data) {
                const now = Date.now();
                const shouldAnnounce = now - this.lastAnnouncementTime > 30000;
                
                if (data.environmental_data) {
                    const env = data.environmental_data;
                    this.updateElement('temperature', `${env.temperature?.toFixed(1) || '--'}¬∞C`);
                    this.updateElement('humidity', `${env.humidity?.toFixed(0) || '--'}%`);
                    this.updateElement('airQuality', env.air_quality_pm25?.toFixed(1) || '--');
                    this.updateElement('co2Level', `${env.co2_level?.toFixed(0) || '--'} ppm`);
                    
                    if (shouldAnnounce) {
                        this.announceEnvironmentalUpdate(data);
                        this.lastAnnouncementTime = now;
                    }
                }

                if (data.ai_analysis) {
                    const ai = data.ai_analysis;
                    
                    if (ai.consciousness_level) {
                        this.updateElement('consciousness', `${(ai.consciousness_level * 100).toFixed(1)}%`);
                    }
                    
                    if (ai.ai_translation) {
                        this.updateAITranslation(ai.ai_translation);
                    }
                    
                    if (ai.species_recognition) {
                        this.updateSpeciesInsights(ai.species_recognition);
                        
                        if (ai.species_recognition.detected_species && ai.species_recognition.detected_species.length > 0) {
                            const speciesNames = ai.species_recognition.detected_species.map(s => s.name).join(', ');
                            const confidence = ai.species_recognition.detected_species[0].confidence;
                            this.gaia.speak(`Biological entities identified through advanced pattern recognition: ${speciesNames}. Species identification confidence: ${(confidence * 100).toFixed(0)} percent. Biodiversity monitoring matrix updated. Ecosystem vitality confirmed.`);
                        }
                    }
                    
                    if (ai.carbon_analysis) {
                        const carbon = ai.carbon_analysis;
                        this.updateElement('carbonSequestration', `${carbon.carbon_sequestration_rate?.toFixed(1) || '--'} t/ha`);
                        this.updateElement('carbonCredits', carbon.carbon_credits_potential || '--');
                    }
                }
            }

            announceEnvironmentalUpdate(data) {
                if (!this.gaia.isEnabled || this.gaia.isSpeaking) return;
                
                const env = data.environmental_data;
                if (!env) return;
                
                const temp = env.temperature?.toFixed(1);
                const humidity = env.humidity?.toFixed(0);
                const co2 = env.co2_level?.toFixed(0);
                const airQuality = env.air_quality_pm25?.toFixed(1);
                
                let announcement = "Environmental telemetry update received. ";
                
                if (temp) {
                    if (temp > 30) announcement += `Atmospheric temperature reading: ${temp} degrees Celsius. Thermal regulation protocols active. `;
                    else if (temp < 10) announcement += `Cool atmospheric conditions detected: ${temp} degrees Celsius. Cold weather monitoring engaged. `;
                    else announcement += `Temperature within optimal range: ${temp} degrees Celsius. Thermal stability confirmed. `;
                }
                
                if (humidity) {
                    if (humidity > 80) announcement += `Humidity levels elevated at ${humidity} percent. Moisture management systems monitoring. `;
                    else if (humidity < 30) announcement += `Low humidity detected: ${humidity} percent. Atmospheric moisture tracking active. `;
                    else announcement += `Humidity levels optimal at ${humidity} percent. `;
                }
                
                if (co2 && co2 > 450) {
                    announcement += `Carbon dioxide concentration: ${co2} parts per million. Elevated levels detected. Carbon cycle analysis in progress. `;
                }
                
                if (airQuality && airQuality > 50) {
                    announcement += `Air quality index requires attention. Atmospheric purity assessment ongoing. `;
                }
                
                announcement += "Continuous environmental surveillance maintained. All monitoring systems operational.";
                
                this.gaia.speak(announcement);
            }

            updateElement(id, value) {
                const element = document.getElementById(id);
                if (element && element.textContent !== value) {
                    element.style.opacity = '0.5';
                    setTimeout(() => {
                        element.textContent = value;
                        element.style.opacity = '1';
                    }, 200);
                }
            }

            updateAITranslation(translation) {
                const element = document.getElementById('aiTranslation');
                if (element) {
                    element.style.opacity = '0';
                    setTimeout(() => {
                        element.textContent = `üåç ${translation}`;
                        element.style.opacity = '1';
                    }, 300);
                }
            }

            updateSpeciesInsights(speciesData) {
                const container = document.getElementById('speciesInsights');
                if (!container || !speciesData.detected_species) return;

                container.innerHTML = '';
                
                if (speciesData.detected_species.length === 0) {
                    container.innerHTML = `
                        <div class="insight">
                            <div class="insight-header">
                                <div class="insight-icon">üîç</div>
                                <div class="insight-title">Monitoring Wildlife</div>
                            </div>
                            <div class="insight-text">Scanning for species activity...</div>
                        </div>
                    `;
                    return;
                }

                speciesData.detected_species.forEach(species => {
                    const insight = document.createElement('div');
                    insight.className = 'insight';
                    insight.innerHTML = `
                        <div class="insight-header">
                            <div class="insight-icon">ü¶ã</div>
                            <div class="insight-title">${species.name}</div>
                        </div>
                        <div class="insight-text">
                            Confidence: ${(species.confidence * 100).toFixed(0)}% | 
                            Activity: ${species.activity}
                        </div>
                    `;
                    container.appendChild(insight);
                });
            }
        }

        function gaiaSpeak(type) {
            const gaia = window.gaiaInstance;
            if (!gaia) {
                console.log('GAIA instance not available');
                return;
            }
            
            if (!gaia.isEnabled) {
                console.log('Enabling GAIA voice for interaction');
                gaia.isEnabled = true;
                document.getElementById('voiceToggle').classList.add('speaking');
            }
            
            // Get contextual response based on current environmental data
            const message = gaia.getContextualResponse(type, window.currentEnvironmentalData);
            gaia.speak(message, true);
            
            // Store interaction context
            gaia.conversationContext.push({
                type: type,
                timestamp: Date.now(),
                response: message.substring(0, 50) + '...'
            });
            
            // Keep only last 5 interactions
            if (gaia.conversationContext.length > 5) {
                gaia.conversationContext.shift();
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            const ecoLingua = new EcoLinguaProfessional();
            window.gaiaInstance = ecoLingua.gaia;
        });
    </script>
</body>
</html>